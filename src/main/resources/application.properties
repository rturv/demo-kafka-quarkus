# -------------------------------------------------------------
# Configuración Quarkus - Ejercicio de mensajería Kafka
# Archivo: src/main/resources/application.properties
# Comentarios: explica cada propiedad y su propósito
# -------------------------------------------------------------

# --- Ejemplo previo (words) -------------------------------------------------
# Propiedades para el ejemplo inicial de envío/recepción de palabras.
# `auto.offset.reset` controla desde dónde empieza a leer el consumidor
# (earliest = desde el inicio, latest = solo nuevos mensajes).
mp.messaging.incoming.words-in.auto.offset.reset=earliest
mp.messaging.incoming.words-in.topic=words
mp.messaging.outgoing.words-out.topic=words


# --- Configuración general de Kafka ---------------------------------------

# Dirección(es) del broker Kafka: host:puerto. Cambia a la dirección real
# en entornos de desarrollo/producción (o usa variable de entorno).
kafka.bootstrap.servers=localhost:9092


# --- Topic de la aplicación -------------------------------------------------

# Nombre del topic que usará este ejercicio para mensajes de usuario.
# Se usa como variable en las propiedades de producer/consumer.
mensajes.topic=mensajes


# --- Productor (Outgoing) --------------------------------------------------

# Indica que se usa el conector SmallRye Kafka para el canal saliente
mp.messaging.outgoing.mensajes-out.connector=smallrye-kafka

# Topic de salida — normalmente referenciado a la variable `mensajes.topic`
mp.messaging.outgoing.mensajes-out.topic=${mensajes.topic}

# Serializador para los valores enviados (en este ejemplo se envía JSON/string)
mp.messaging.outgoing.mensajes-out.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# Bootstrap servers específicos para el binding saliente (puede usar la variable global)
mp.messaging.outgoing.mensajes-out.bootstrap.servers=${kafka.bootstrap.servers}


# --- Consumidor (Incoming) -------------------------------------------------

# Conector entrante para leer del topic definido.
mp.messaging.incoming.mensajes-in.connector=smallrye-kafka

# Topic que el consumidor escuchará (mismo que el del productor en este ejemplo)
mp.messaging.incoming.mensajes-in.topic=${mensajes.topic}

# Comportamiento de offset: `earliest` para leer desde el principio del topic
mp.messaging.incoming.mensajes-in.auto.offset.reset=earliest

# Deserializador esperado para los valores entrantes
mp.messaging.incoming.mensajes-in.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer

# Bootstrap servers para el binding entrante
mp.messaging.incoming.mensajes-in.bootstrap.servers=${kafka.bootstrap.servers}


# --- Flags y utilidades ----------------------------------------------------

# Habilita o deshabilita el consumidor definido en la aplicación.
# Útil para entornos donde solo se quiere publicar mensajes sin consumirlos.
# Group id del consumer (recomendado)
# - Fija el consumer group id usado por Kafka para este binding. Definirlo
#   permite repartir particiones entre instancias y mantener offset por grupo.
# - Use la propiedad `mp.messaging.incoming.<canal>.group.id` para establecer
#   el group id en SmallRye Reactive Messaging (propiedad compatible).
mp.messaging.incoming.mensajes-in.group.id=mi-grupo-quarkus

# Cambiar a true para compilar/arrancar con el consumidor habilitado.
# Usar @IfBuildProperty en `MensajesConsumer` para evitar que el bean se
# cree cuando esta propiedad sea false (no habrá conexión al broker).
mensajes.consumidor.enabled=true


# --- Notas adicionales -----------------------------------------------------
# - Para entornos con autenticación (SASL), SSL o configuración avanzada del
#   broker, añade las propiedades del conector SmallRye Kafka correspondientes
#   (security.protocol, sasl.mechanism, sasl.jaas.config, ssl.truststore.location, etc.).
# - En producción, evita `autoCreateTopics=true` si la administración de topics
#   debe controlarse por el equipo de plataforma.
# - Puedes parametrizar `kafka.bootstrap.servers` mediante variables de entorno
#   o perfiles Quarkus (ej. %dev, %prod) para manejar diferentes entornos.
# ---------------------------------------------------------------------------
